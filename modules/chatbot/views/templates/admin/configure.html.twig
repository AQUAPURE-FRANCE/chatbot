{% extends '@PrestaShop/Admin/layout.html.twig' %}
{% from '@Modules/chatbot/views/templates/admin/_partials/_form_model.html.twig' import input as input_field, textarea, checkbox %}
{% set trans_day_hash = {
    "Monday": "Lundi",
    "Tuesday": "Mardi",
    "Wednesday": "Mercredi",
    "Thursday": "Jeudi",
    "Friday": "Vendredi",
    "Saturday": "Samedi",
    "Sunday": "Dimanche"
}
%}

{% block content %}
    <ul class="nav nav-tabs" id="configurationTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="shop-hour-tab" data-toggle="tab" href="#shop-hour-tab-content"
               role="tab"
               aria-controls="history" aria-selected="true">Horaire de la boutique</a>
        </li>
    </ul>
    <div class="tab-content" id="configurationContentTab">
        <div class="tab-pane fade show active" id="shop-hour-tab-content" role="tabpanel" aria-labelledby="shop-hour-tab">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div id="form-group">
                            {% for form in forms %}
                                {% set checked = week is empty ? false : week[loop.index-1].isAvailable %}
                                {% set disabled = week is empty ? false : week[loop.index-1].isAvailable %}
                                <form id="{{ form.vars.attr.id }}" method="post" action="">
                                    <div class="form-row">
                                        <div class="form-group col-md-2 mt-4">
                                            <h2>{{ trans_day_hash[form.vars.attr.id|date('l', 'Europe/Paris')] }}</h2>
                                        </div>
                                    </div>
                                    <div class="form-row d-flex align-items-center justify-content-center">
                                        <div class="form-group col-md-2 mt-4">
                                            {{ checkbox(form.children.isAvailable.vars.id ~ form.vars.attr.id, form.children.isAvailable.vars.full_name, 'form-control js-data', '', checked) }}
                                        </div>
                                        <div class="form-group col-md-5">
                                            <label for="{{ form.children.timeStart.vars.id ~ form.vars.attr.id }}" class="form-label">Ouvre a </label>
                                            {{ input_field(form.children.timeStart.vars.id ~ form.vars.attr.id, form.children.timeStart.vars.full_name, 'form-control js-data', '', form.children.timeStart.vars.block_prefixes.1, disabled) }}
                                        </div>
                                        <div class="form-group col-md-5">
                                            <label for="{{ form.children.timeEnd.vars.id ~ form.vars.attr.id }}" class="form-label">Ferme a </label>
                                            {{ input_field(form.children.timeEnd.vars.id ~ form.vars.attr.id, form.children.timeEnd.vars.full_name, 'form-control js-data', '', form.children.timeEnd.vars.block_prefixes.1, disabled) }}
                                        </div>
                                    </div>
                                    <div id="block_{{ form.children.defaultMessage.vars.id ~ form.vars.attr.id }}" class="form-row pt-2 {{ disabled == false ? 'd-none'}}">
                                        <div class="form-group col-md-12">
                                            <label for="{{ form.children.defaultMessage.vars.id ~ form.vars.attr.id }}" class="form-label">Message par
                                                d√©faut</label>
                                            {{ textarea(form.children.defaultMessage.vars.id ~ form.vars.attr.id, form.children.defaultMessage.vars.full_name, 'form-control js-data', '', disabled) }}
                                        </div>
                                    </div>
                                </form>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <script type="text/javascript" src="{{ jsDir }}chatbot-bundle/chatbot-bundle.js"></script>
{% endblock %}
